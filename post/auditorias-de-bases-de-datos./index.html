<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    
    <meta itemprop="name" content="Auditorías de bases de datos. | Cutreblog">
    <meta itemprop="description" content="En este post veremos como auditar bases de datos.">

    
    <meta name="twitter:title" content="Auditorías de bases de datos. | Cutreblog">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:description" content="En este post veremos como auditar bases de datos.">
    <meta name="twitter:site" content="@ReeseCodes">
    <meta name="twitter:creator" content="@ReeseCodes">
    <meta name="twitter:image:src" content="https://reeseschultz.github.io/twitter.jpg">

    
    <meta name="og:title" content="Auditorías de bases de datos. | Cutreblog">
    <meta name="og:description" content="En este post veremos como auditar bases de datos.">
    <meta name="og:image" content="https://reeseschultz.github.io/og.jpg">
    <meta name="og:url" content="https://reeseschultz.github.io/">
    <meta name="og:site_name" content="Cutreblog">
    <meta name="og:locale" content="en_GB">
    <meta name="og:type" content="website">

    <link rel="icon" type="image/x-icon" href="/logo.png" />

    <title>Auditorías de bases de datos. | Cutreblog</title>

    <link rel="stylesheet" href="/assets/main.bundle.css">

    
  </head>
  <body class="flex flex-col min-h-screen">
    <header>
  <nav class="container mx-auto max-w-3xl px-8 pt-2 flex flex-wrap justify-between">
    <div>
      <h1>
        <a href="/">Cutreblog</a>
      </h1>
      <p>Blog de Alejandro Montes</p>
    </div>

    <ul class="flex flex-wrap sm:w-32 w-full mt-6 md:justify-between justify-evenly">
      <li>
        <a href="/404.html">404</a>
      </li>

      <li>
        <a href="/about">Sobre mí.</a>
      </li>
    </ul>
  </nav>
</header>

    <main class="container mx-auto max-w-3xl p-8 grow">
      
    <p></p>
    <div>
        <h2>Auditorías de bases de datos.</h2>

        
            <p class="excerpt">En este post veremos como auditar bases de datos.</p>
        

        
            <div class="mb-2">
                <a class="tag GBD" href="/tag/GBD">GBD</a>
            </div>
        

        
            
                <p class="text-sm italic">Creado en
                    <span datetime="Mon Feb 20 2023 01:00:00 GMT+0100 (hora estándar de Europa central)">February 20, 2023</span>.</p>
            
        

        <div class="content post">
            
                <hr />

                <h3>Tabla de Contenido.</h3>

                <nav class="toc">
                <ol>
                    
                    <li><a href="#activa-desde-sql*plus-la-auditor%C3%ADa-de-los-intentos-de-acceso-exitosos-al-sistema.-comprueba-su-funcionamiento.">Activa desde SQL*Plus la auditoría de los intentos de acceso exitosos al sistema. Comprueba su funcionamiento.</a>
            		</li>

                    <li><a href="#realiza-un-procedimiento-en-pl%2Fsql-que-te-muestre-los-accesos-fallidos-junto-con-el-motivo-de-los-mismos%2C-transformando-el-c%C3%B3digo-de-error-almacenado-en-un-mensaje-de-texto-comprensible.-contempla-todos-los-motivos-posibles-para-que-un-acceso-sea-fallido.">Realiza un procedimiento en PL/SQL que te muestre los accesos fallidos junto con el motivo de los mismos, transformando el código de error almacenado en un mensaje de texto comprensible. Contempla todos los motivos posibles para que un acceso sea fallido.</a>
            		</li>

                    <li><a href="#activa-la-auditor%C3%ADa-de-las-operaciones-dml-realizadas-por-scott.-comprueba-su-funcionamiento.">Activa la auditoría de las operaciones DML realizadas por SCOTT. Comprueba su funcionamiento.</a>
            		</li>

                    <li><a href="#realiza-una-auditor%C3%ADa-de-grano-fino-para-almacenar-informaci%C3%B3n-sobre-la-inserci%C3%B3n-de-empleados-con-sueldo-superior-a-2000-en-la-tabla-emp-de-scott.">Realiza una auditoría de grano fino para almacenar información sobre la inserción de empleados con sueldo superior a 2000 en la tabla emp de scott.</a>
            		</li>

                    <li><a href="#explica-la-diferencia-entre-auditar-una-operaci%C3%B3n-by-access-o-by-session-ilustr%C3%A1ndolo-con-ejemplos.">Explica la diferencia entre auditar una operación by access o by session ilustrándolo con ejemplos.</a>
            		</li>

                    <li><a href="#documenta-las-diferencias-entre-los-valores-db-y-db%2C-extended-del-par%C3%A1metro-audit_trail-de-oracle.-demu%C3%A9stralas-poniendo-un-ejemplo-de-la-informaci%C3%B3n-sobre-una-operaci%C3%B3n-concreta-recopilada-con-cada-uno-de-ellos.">Documenta las diferencias entre los valores db y db, extended del parámetro audit_trail de ORACLE. Demuéstralas poniendo un ejemplo de la información sobre una operación concreta recopilada con cada uno de ellos.</a>
            		</li>

                    <li><a href="#averigua-si-en-postgres-se-pueden-realizar-los-cuatro-primeros-apartados.-si-es-as%C3%AD%2C-documenta-el-proceso-adecuadamente.">Averigua si en Postgres se pueden realizar los cuatro primeros apartados. Si es así, documenta el proceso adecuadamente.</a>
            		</li>

                    <li><a href="#averigua-si-en-mysql-se-pueden-realizar-los-apartados-1%2C-3-y-4.-si-es-as%C3%AD%2C-documenta-el-proceso-adecuadamente.">Averigua si en MySQL se pueden realizar los apartados 1, 3 y 4. Si es así, documenta el proceso adecuadamente.</a>
            		</li>

                    <li><a href="#averigua-las-posibilidades-que-ofrece-mongodb-para-auditar-los-cambios-que-va-sufriendo-un-documento.-demuestra-su-funcionamiento.">Averigua las posibilidades que ofrece MongoDB para auditar los cambios que va sufriendo un documento. Demuestra su funcionamiento.</a>
            		</li>

                    <li><a href="#averigua-si-en-mongodb-se-pueden-auditar-los-accesos-a-una-colecci%C3%B3n-concreta.-demuestra-su-funcionamiento.">Averigua si en MongoDB se pueden auditar los accesos a una colección concreta. Demuestra su funcionamiento.</a>
            		</li>
                </ol>
            </nav>

                <hr />
            

            <h3 id="activa-desde-sql*plus-la-auditor%C3%ADa-de-los-intentos-de-acceso-exitosos-al-sistema.-comprueba-su-funcionamiento." tabindex="-1">Activa desde SQL*Plus la auditoría de los intentos de acceso exitosos al sistema. Comprueba su funcionamiento.</h3>
<p>Lo primero que haremos es comprobar que las auditorías están activadas en nuestra base de datos. Para ello ejecutaremos lO siguiente:</p>
<pre class="language-sql"><code class="language-sql"><span class="token keyword">SHOW</span> PARAMETER AUDIT<span class="token punctuation">;</span></code></pre>
<p><img src="/img/GBD-audit-1.png" alt="GBD-audit-1.png"></p>
<p>Como se aprecia, el valor de audit_trail es DB, si no estuvieran activadas, aparecería none. Si queremos activarlos tenemos que ejecutar la siguiente consulta y reiniciar el sistema:</p>
<pre class="language-sql"><code class="language-sql"><span class="token keyword">ALTER</span> SYSTEM <span class="token keyword">SET</span> audit_trail<span class="token operator">=</span>db scope<span class="token operator">=</span>spfile<span class="token punctuation">;</span></code></pre>
<p>Una vez hecho este paréntesis, procederemos a realizar el ejercicio. Para auditar los intentos exitosos de acceso, tenemos que ejecutar el siguiente comando:</p>
<pre class="language-txt"><code class="language-txt">SQL> AUDIT CREATE SESSION BY ACCESS;<br><br>Auditoria terminada correctamente.<br></code></pre>
<p>Ahora realizamos intentos exitosos de login y ejecutamos lo siguiente para ver si se han registrados los intentos:</p>
<pre class="language-txt"><code class="language-txt">SQL> SELECT OS_USERNAME, USERNAME, EXTENDED_TIMESTAMP, ACTION_NAME FROM DBA_AUDIT_SESSION;<br><br>OS_USERNAME<br>--------------------------------------------------------------------------------<br>USERNAME<br>--------------------------------------------------------------------------------<br>EXTENDED_TIMESTAMP<br>---------------------------------------------------------------------------<br>ACTION_NAME<br>----------------------------<br>alemd<br>PRUEBA<br>20/02/23 09:28:09,091698 +01:00<br>LOGON<br><br>OS_USERNAME<br>--------------------------------------------------------------------------------<br>USERNAME<br>--------------------------------------------------------------------------------<br>EXTENDED_TIMESTAMP<br>---------------------------------------------------------------------------<br>ACTION_NAME<br>----------------------------<br>alemd<br>PRUEBA2<br>20/02/23 09:28:15,544590 +01:00<br>LOGON<br><br>OS_USERNAME<br>--------------------------------------------------------------------------------<br>USERNAME<br>--------------------------------------------------------------------------------<br>EXTENDED_TIMESTAMP<br>---------------------------------------------------------------------------<br>ACTION_NAME<br>----------------------------<br>alemd<br>ALEMD<br>20/02/23 09:28:19,944716 +01:00<br>LOGON<br></code></pre>
<p>Como vemos indica que el usuario del sistema alemd se ha intentado conectar a los usuarios de la base de datos prueba, prueba2 y alemd, indica la fecha y hora del intento, y LOGON que indica que ha intentado conectar.</p>
<p>Si queremos volver a desactivar la auditoría ejecutamos el siguiente comando:</p>
<pre class="language-sql"><code class="language-sql">NOAUDIT <span class="token keyword">CREATE</span> <span class="token keyword">SESSION</span> WHENEVER <span class="token operator">NOT</span> SUCCESSFUL<span class="token punctuation">;</span></code></pre>
<h3 id="realiza-un-procedimiento-en-pl%2Fsql-que-te-muestre-los-accesos-fallidos-junto-con-el-motivo-de-los-mismos%2C-transformando-el-c%C3%B3digo-de-error-almacenado-en-un-mensaje-de-texto-comprensible.-contempla-todos-los-motivos-posibles-para-que-un-acceso-sea-fallido." tabindex="-1">Realiza un procedimiento en PL/SQL que te muestre los accesos fallidos junto con el motivo de los mismos, transformando el código de error almacenado en un mensaje de texto comprensible. Contempla todos los motivos posibles para que un acceso sea fallido.</h3>
<p>Adjunto los módulos de programación necesarios para la resolución del ejercicio:</p>
<pre class="language-sql"><code class="language-sql"><span class="token keyword">CREATE</span> <span class="token operator">OR</span> <span class="token keyword">REPLACE</span> <span class="token keyword">PROCEDURE</span> P_EXPLICA <span class="token punctuation">(</span>P_CODIGO DBA_AUDIT_SESSION<span class="token punctuation">.</span>RETURNCODE<span class="token operator">%</span><span class="token keyword">TYPE</span><span class="token punctuation">)</span><br><span class="token operator">IS</span><br><span class="token keyword">BEGIN</span><br>    <span class="token keyword">CASE</span> P_CODIGO <br>    	<span class="token keyword">WHEN</span> <span class="token number">911</span> <span class="token keyword">THEN</span><br>    		DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">'CONTIENE UN CARÁCTER INVÁLIDO.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    	<span class="token keyword">WHEN</span> <span class="token number">1004</span> <span class="token keyword">THEN</span><br>    		DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">'EL ACCESO HA SIDO DENEGADO.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    	<span class="token keyword">WHEN</span> <span class="token number">1017</span> <span class="token keyword">THEN</span><br>    		DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">'EL USUARIO/CONTRASEÑA NO ES VÁLIDO.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    	<span class="token keyword">WHEN</span> <span class="token number">1045</span> <span class="token keyword">THEN</span><br>    		DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">'EL USUARIO NO TIENE EL PERMISO CREATE SESSION.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    	<span class="token keyword">WHEN</span> <span class="token number">28000</span> <span class="token keyword">THEN</span><br>    		DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">'LA CUENTA ESTÁ BLOQUEADA.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    	<span class="token keyword">WHEN</span> <span class="token number">28001</span> <span class="token keyword">THEN</span><br>    		DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">'LA CONTRASEÑA HA CADUCADO.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    	<span class="token keyword">WHEN</span> <span class="token number">28002</span> <span class="token keyword">THEN</span><br>    		DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">'LA CONTRASEÑA VA A CADUCAR PRONTO, DEBERÍAS CAMBIARLA.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    	<span class="token keyword">WHEN</span> <span class="token number">28003</span> <span class="token keyword">THEN</span><br>    		DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">'LA CONTRASEÑA NO ES LO BASTANTE COMPLEJA.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    	<span class="token keyword">WHEN</span> <span class="token number">28007</span> <span class="token keyword">THEN</span><br>    		DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">'NO PUEDES REUTILIZAR LA CONTRASEÑA.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    	<span class="token keyword">WHEN</span> <span class="token number">28008</span> <span class="token keyword">THEN</span><br>    		DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">'CONTRASEÑA ANTIGUA INVÁLIDA.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    	<span class="token keyword">WHEN</span> <span class="token number">28009</span> <span class="token keyword">THEN</span><br>    		DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">'LA CONEXIÓN A SYS DEBE SER A TRAVÉS DE SYSDBA O SYSOPER.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    	<span class="token keyword">WHEN</span> <span class="token number">28011</span> <span class="token keyword">THEN</span><br>    		DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">'LA CONTRASEÑA VA A CADUCAR PRONTO, DEBERÍAS CAMBIARLA.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    	<span class="token keyword">WHEN</span> <span class="token number">28009</span> <span class="token keyword">THEN</span><br>    		DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">'LA CONTRASEÑA ORIGINAL NO SE HA INTRODUCIDO.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    	<span class="token keyword">ELSE</span><br>    		DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">'PÓNGASE EN CONTACTO CON EL ADMINISTRADOR PARA SABER LA RAZÓN.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">END</span> <span class="token keyword">CASE</span><span class="token punctuation">;</span><br><span class="token keyword">END</span><span class="token punctuation">;</span><br><span class="token operator">/</span><br><br><span class="token keyword">CREATE</span> <span class="token operator">OR</span> <span class="token keyword">REPLACE</span> <span class="token keyword">PROCEDURE</span> P_ACCESSFAILED <br><span class="token operator">IS</span><br>    <span class="token keyword">CURSOR</span> C_INTENTOS_FALLIDOS <span class="token operator">IS</span> <br>    <span class="token keyword">SELECT</span> OS_USERNAME<span class="token punctuation">,</span> USERNAME<span class="token punctuation">,</span> EXTENDED_TIMESTAMP<span class="token punctuation">,</span> RETURNCODE <br>    <span class="token keyword">FROM</span> DBA_AUDIT_SESSION<span class="token punctuation">;</span><br>    V_REG C_INTENTOS_FALLIDOS<span class="token operator">%</span>ROWTYPE<span class="token punctuation">;</span><br><span class="token keyword">BEGIN</span><br>    <span class="token keyword">FOR</span> V_REG <span class="token operator">IN</span> C_INTENTOS_FALLIDOS <span class="token keyword">LOOP</span><br>    	DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">'INTENTO FALLIDO DE ACCESO'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    	DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">'USUARIO DEL SISTEMA: '</span><span class="token operator">||</span>V_REG<span class="token punctuation">.</span>OS_USERNAME<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    	DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">'USUARIO DE LA BASE DE DATOS: '</span><span class="token operator">||</span>V_REG<span class="token punctuation">.</span>USERNAME<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    	DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span><span class="token string">'FECHA Y HORA: '</span><span class="token operator">||</span>V_REG<span class="token punctuation">.</span>EXTENDED_TIMESTAMP<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    	P_EXPLICA<span class="token punctuation">(</span>V_REG<span class="token punctuation">.</span>RETURNCODE<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    	DBMS_OUTPUT<span class="token punctuation">.</span>PUT_LINE<span class="token punctuation">(</span>CHR<span class="token punctuation">(</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token keyword">END</span> <span class="token keyword">LOOP</span><span class="token punctuation">;</span><br><span class="token keyword">END</span><span class="token punctuation">;</span><br><span class="token operator">/</span></code></pre>
<p>Ejecutamos el procedimiento:</p>
<pre class="language-txt"><code class="language-txt">SQL> EXEC P_ACCESSFAILED;<br>INTENTO FALLIDO DE ACCESO<br>USUARIO DEL SISTEMA: alemd<br>USUARIO DE LA BASE DE DATOS: PRUEBA<br>FECHA Y HORA: 20/02/23 09:28:09,091698 +01:00<br>EL USUARIO/CONTRASE??A NO ES V??LIDO.<br>	<br>INTENTO FALLIDO DE ACCESO<br>USUARIO DEL SISTEMA: alemd<br>USUARIO DE LA BASE DE DATOS: PRUEBA2<br>FECHA Y HORA: 20/02/23 09:28:15,544590 +01:00<br>EL USUARIO/CONTRASE??A NO ES V??LIDO.<br>	<br>INTENTO FALLIDO DE ACCESO<br>USUARIO DEL SISTEMA: alemd<br>USUARIO DE LA BASE DE DATOS: ALEMD<br>FECHA Y HORA: 20/02/23 09:28:19,944716 +01:00<br>EL USUARIO/CONTRASE??A NO ES V??LIDO.</code></pre>
<h3 id="activa-la-auditor%C3%ADa-de-las-operaciones-dml-realizadas-por-scott.-comprueba-su-funcionamiento." tabindex="-1">Activa la auditoría de las operaciones DML realizadas por SCOTT. Comprueba su funcionamiento.</h3>
<p>Para activar la auditoría en operaciones DML, ejecutamos el siguiente comando:</p>
<pre class="language-txt"><code class="language-txt">SQL> AUDIT INSERT TABLE, UPDATE TABLE, DELETE TABLE BY SCOTT;<br><br>Auditoria terminada correctamente.<br></code></pre>
<p>Ahora nos conectamos con el usuario SCOTT y realizaremos algunos insert, update y deletes.</p>
<pre class="language-txt"><code class="language-txt">SQL> UPDATE DEPT SET LOC='SEVILLA' WHERE DEPTNO='30';<br><br>1 fila actualizada.<br><br>SQL> DELETE FROM EMP WHERE EMPNO='1234';<br><br>1 fila suprimida.<br><br>SQL> DELETE FROM EMP WHERE EMPNO='1298';<br><br>1 fila suprimida.<br><br>SQL> INSERT INTO DEPT VALUES (60,'PRUEBA','PRUEBA');<br><br>1 fila creada.<br></code></pre>
<p>Ahora ejecutamos la siguiente consulta para ver si se han registrado los cambios:</p>
<pre class="language-txt"><code class="language-txt">SQL> SELECT USERNAME, OBJ_NAME, ACTION_NAME, EXTENDED_TIMESTAMP FROM DBA_AUDIT_OBJECT;<br><br>USERNAME<br>--------------------------------------------------------------------------------<br>OBJ_NAME<br>--------------------------------------------------------------------------------<br>ACTION_NAME<br>----------------------------<br>EXTENDED_TIMESTAMP<br>---------------------------------------------------------------------------<br>SCOTT<br>DEPT<br>INSERT<br>20/02/23 10:19:30,519384 +01:00<br><br><br>USERNAME<br>--------------------------------------------------------------------------------<br>OBJ_NAME<br>--------------------------------------------------------------------------------<br>ACTION_NAME<br>----------------------------<br>EXTENDED_TIMESTAMP<br>---------------------------------------------------------------------------<br>SCOTT<br>DEPT<br>UPDATE<br>20/02/23 10:16:50,299983 +01:00<br><br><br>USERNAME<br>--------------------------------------------------------------------------------<br>OBJ_NAME<br>--------------------------------------------------------------------------------<br>ACTION_NAME<br>----------------------------<br>EXTENDED_TIMESTAMP<br>---------------------------------------------------------------------------<br>SCOTT<br>EMP<br>DELETE<br>20/02/23 10:17:17,481421 +01:00<br><br><br>USERNAME<br>--------------------------------------------------------------------------------<br>OBJ_NAME<br>--------------------------------------------------------------------------------<br>ACTION_NAME<br>----------------------------<br>EXTENDED_TIMESTAMP<br>---------------------------------------------------------------------------<br>SCOTT<br>EMP<br>DELETE<br>20/02/23 10:17:30,738806 +01:00<br><br><br>USERNAME<br>--------------------------------------------------------------------------------<br>OBJ_NAME<br>--------------------------------------------------------------------------------<br>ACTION_NAME<br>----------------------------<br>EXTENDED_TIMESTAMP<br>---------------------------------------------------------------------------<br>SCOTT<br>EMP<br>DELETE<br>20/02/23 10:18:41,838448 +01:00<br><br><br>USERNAME<br>--------------------------------------------------------------------------------<br>OBJ_NAME<br>--------------------------------------------------------------------------------<br>ACTION_NAME<br>----------------------------<br>EXTENDED_TIMESTAMP<br>---------------------------------------------------------------------------<br>SCOTT<br>EMP<br>DELETE<br>20/02/23 10:18:55,888517 +01:00<br><br><br>6 filas seleccionadas.<br></code></pre>
<p>Vemos como nos indica el usuario, la tabla a la que afecta, la acción realizada y la fecha.</p>
<h3 id="realiza-una-auditor%C3%ADa-de-grano-fino-para-almacenar-informaci%C3%B3n-sobre-la-inserci%C3%B3n-de-empleados-con-sueldo-superior-a-2000-en-la-tabla-emp-de-scott." tabindex="-1">Realiza una auditoría de grano fino para almacenar información sobre la inserción de empleados con sueldo superior a 2000 en la tabla emp de scott.</h3>
<p>Lo primero que haremos será crear el procedimiento que controla la inserción de los empleados del departamento:</p>
<pre class="language-sql"><code class="language-sql"><span class="token keyword">BEGIN</span><br>    DBMS_FGA<span class="token punctuation">.</span>ADD_POLICY <span class="token punctuation">(</span><br>        object_schema      <span class="token operator">=</span><span class="token operator">></span>  <span class="token string">'SCOTT'</span><span class="token punctuation">,</span><br>        object_name        <span class="token operator">=</span><span class="token operator">></span>  <span class="token string">'EMP'</span><span class="token punctuation">,</span><br>        policy_name        <span class="token operator">=</span><span class="token operator">></span>  <span class="token string">'policy_ej4'</span><span class="token punctuation">,</span><br>        audit_condition    <span class="token operator">=</span><span class="token operator">></span>  <span class="token string">'SAL > 2000'</span><span class="token punctuation">,</span><br>        statement_types    <span class="token operator">=</span><span class="token operator">></span>  <span class="token string">'INSERT'</span><br>    <span class="token punctuation">)</span><span class="token punctuation">;</span><br><span class="token keyword">END</span><span class="token punctuation">;</span><br><span class="token operator">/</span></code></pre>
<p>Ahora insertaremos varios registros para comprobar si se registran en la auditoría:</p>
<pre class="language-txt"><code class="language-txt">SQL> INSERT INTO EMP VALUES (1234, 'SMITH', 'CLERK', 7902, TO_DATE('01-01-1999','MM-DD-YYYY'), 2500, NULL, 20);<br><br>1 fila creada.<br><br>SQL> INSERT INTO EMP VALUES (1235, 'SMITH', 'CLERK', 7902, TO_DATE('01-01-1999','MM-DD-YYYY'), 2001, NULL, 20);<br><br>1 fila creada.<br><br>SQL> INSERT INTO EMP VALUES (1236, 'SMITH', 'CLERK', 7902, TO_DATE('01-01-1999','MM-DD-YYYY'), 1999, NULL, 20);<br><br>1 fila creada.<br></code></pre>
<p>He insertado una fila con el salario con 2500, otra con 2001 y otra fila con 1999, solo tienen que aparecer 2 registros en la auditoría. Ejecutaremos la siguiente consulta para ver si se han registrado:</p>
<pre class="language-txt"><code class="language-txt">SQL> SELECT DB_USER, OBJECT_NAME, SQL_TEXT, EXTENDED_TIMESTAMP FROM DBA_FGA_AUDIT_TRAIL WHERE POLICY_NAME='POLICY_EJ4';<br><br>DB_USER<br>--------------------------------------------------------------------------------<br>OBJECT_NAME<br>--------------------------------------------------------------------------------<br>SQL_TEXT<br>--------------------------------------------------------------------------------<br>EXTENDED_TIMESTAMP<br>---------------------------------------------------------------------------<br>SCOTT<br>EMP<br>INSERT INTO EMP VALUES (1234, 'SMITH', 'CLERK', 7902, TO_DATE('01-01-1999','MM-D<br>D-YYYY'), 2500, NULL, 20)<br>20/02/23 19:12:39,241404 +01:00<br><br>DB_USER<br>--------------------------------------------------------------------------------<br>OBJECT_NAME<br>--------------------------------------------------------------------------------<br>SQL_TEXT<br>--------------------------------------------------------------------------------<br>EXTENDED_TIMESTAMP<br>---------------------------------------------------------------------------<br><br>SCOTT<br>EMP<br>INSERT INTO EMP VALUES (1235, 'SMITH', 'CLERK', 7902, TO_DATE('01-01-1999','MM-D<br>D-YYYY'), 2001, NULL, 20)<br><br>DB_USER<br>--------------------------------------------------------------------------------<br>OBJECT_NAME<br>--------------------------------------------------------------------------------<br>SQL_TEXT<br>--------------------------------------------------------------------------------<br>EXTENDED_TIMESTAMP<br>---------------------------------------------------------------------------<br>20/02/23 19:12:45,600793 +01:00</code></pre>
<p>Como vemos, solo se han registrado los insert que tienen el salario mayor a 2000.</p>
<h3 id="explica-la-diferencia-entre-auditar-una-operaci%C3%B3n-by-access-o-by-session-ilustr%C3%A1ndolo-con-ejemplos." tabindex="-1">Explica la diferencia entre auditar una operación by access o by session ilustrándolo con ejemplos.</h3>
<p>La diferencia entre by access y by session, radica en cómo la vista DBA_AUDIT_TRAIL registra las acciones:</p>
<ul>
<li>
<p><strong>By access</strong>: Inserta un registro en la auditoría por cada declaración auditada.</p>
</li>
<li>
<p><strong>By session</strong>: Agrupa los registro cuando la sesión y la acción coinciden. Solo funciona para declaraciones que no sean DDL.</p>
</li>
</ul>
<blockquote>
<p><em>Desde Oracle 11gR2 el by session está deshabilitado y todas las auditorías se hacen by access.</em></p>
</blockquote>
<p>Veamos con un ejemplo la diferencia que puede resultar más sencillo de entender:</p>
<p>Sí ejecutamos la siguiente consulta, nos muestra todas las acciones que se han realizado desde que la tabla está siendo auditada.</p>
<pre class="language-sql"><code class="language-sql"><span class="token keyword">SELECT</span>  <span class="token keyword">timestamp</span><span class="token punctuation">,</span> os_username<span class="token punctuation">,</span> obj_name<span class="token punctuation">,</span>userhost<span class="token punctuation">,</span> username<span class="token punctuation">,</span><span class="token keyword">action</span><span class="token punctuation">,</span>action_name<span class="token punctuation">,</span> ses_actions<br><span class="token keyword">FROM</span>    dba_audit_trail<br><span class="token keyword">WHERE</span>   obj_name <span class="token operator">=</span> <span class="token string">'EMP'</span><span class="token punctuation">;</span></code></pre>
<p>Sí esta tabla estuviese auditada by session agruparía los registros por sesión y acción, es decir, si tenemos 3 inserts para la tabla EMP en una misma sesión solo lo muestra una vez, sin embargo si estuviese auditada by access, mostraría los 3 inserts.</p>
<h3 id="documenta-las-diferencias-entre-los-valores-db-y-db%2C-extended-del-par%C3%A1metro-audit_trail-de-oracle.-demu%C3%A9stralas-poniendo-un-ejemplo-de-la-informaci%C3%B3n-sobre-una-operaci%C3%B3n-concreta-recopilada-con-cada-uno-de-ellos." tabindex="-1">Documenta las diferencias entre los valores db y db, extended del parámetro audit_trail de ORACLE. Demuéstralas poniendo un ejemplo de la información sobre una operación concreta recopilada con cada uno de ellos.</h3>
<p>Ambos valores indican que las auditorías están activadas en el sistema, y la diferencia se encuentra en que <code>db, extended</code> almacena datos que se corresponden con la tabla <code>SQLBLIND</code> y <code>SQLTEXT</code> en la tabla <code>SYS.AUD$</code>, mientras que <code>db</code> no almacena esa información.</p>
<p>Para cambiar el valor de <code>db</code> a <code>db, extended</code>, ejecutamos la siguiente sentencia:</p>
<pre class="language-txt"><code class="language-txt">SQL> ALTER SYSTEM SET audit_trail = DB,EXTENDED SCOPE=SPFILE;<br><br>Sistema modificado.<br></code></pre>
<p>Reiniciamos oracle para que se apliquen los cambios:</p>
<pre class="language-txt"><code class="language-txt">SQL> SHUTDOWN<br>Base de datos cerrada.<br>Base de datos desmontada.<br>Instancia ORACLE cerrada.<br>SQL> STARTUP<br>Instancia ORACLE iniciada.<br><br>Total System Global Area 3573545736 bytes<br>Fixed Size		    9141000 bytes<br>Variable Size		  738197504 bytes<br>Database Buffers	 2818572288 bytes<br>Redo Buffers		    7634944 bytes<br>Base de datos montada.<br>Base de datos abierta.<br>SQL></code></pre>
<p>Comprobamos que se han aplicado correctamente los cambios:</p>
<p><img src="/img/GBD-audit-2.png" alt="GBD-audit-2.png"></p>
<p>Ahora, desde el usuario SCOTT realizaremos dos deletes y dos inserts:</p>
<pre class="language-txt"><code class="language-txt">SQL> DELETE FROM EMP WHERE EMPNO = 111;<br><br>1 fila suprimida.<br><br>SQL> DELETE FROM EMP WHERE EMPNO = 112;<br><br>1 fila suprimida.<br><br>SQL> INSERT INTO EMP VALUES (111, 'SMITH', 'CLERK', 7902, TO_DATE('01-01-1999','MM-DD-YYYY'), 2500, NULL, 20);<br><br>1 fila creada.<br><br>SQL> INSERT INTO EMP VALUES (112, 'SMITH', 'CLERK', 7902, TO_DATE('01-01-1999','MM-DD-YYYY'), 2500, NULL, 20);<br><br>1 fila creada.<br></code></pre>
<p>Ahora veremos que se ha guardado también en la vista SYS.AUD$:</p>
<pre class="language-txt"><code class="language-txt">SQL> SELECT SQLTEXT FROM SYS.AUD$ WHERE CURRENT_USER = 'SCOTT';<br><br>SQLTEXT<br>--------------------------------------------------------------------------------<br><br><br><br><br><br><br><br><br><br><br><br><br>SQLTEXT<br>--------------------------------------------------------------------------------<br><br><br><br>DELETE FROM EMP WHERE EMPNO = 111<br>DELETE FROM EMP WHERE EMPNO = 112<br>INSERT INTO EMP VALUES (111, 'SMITH', 'CLERK', 7902, TO_DATE('01-01-1999','MM-DD<br>INSERT INTO EMP VALUES (112, 'SMITH', 'CLERK', 7902, TO_DATE('01-01-1999','MM-DD<br><br>18 filas seleccionadas.<br><br>SQL> </code></pre>
<p>Como vemos, indica que hay 18 filas pero solo muestra 4 registros de SQLTEXT, que son los que se han registrado desde que he indicado el valor <code>DB, EXTENDED</code> en el parámetro <code>audit_trail</code>.</p>
<h3 id="averigua-si-en-postgres-se-pueden-realizar-los-cuatro-primeros-apartados.-si-es-as%C3%AD%2C-documenta-el-proceso-adecuadamente." tabindex="-1">Averigua si en Postgres se pueden realizar los cuatro primeros apartados. Si es así, documenta el proceso adecuadamente.</h3>
<h3 id="averigua-si-en-mysql-se-pueden-realizar-los-apartados-1%2C-3-y-4.-si-es-as%C3%AD%2C-documenta-el-proceso-adecuadamente." tabindex="-1">Averigua si en MySQL se pueden realizar los apartados 1, 3 y 4. Si es así, documenta el proceso adecuadamente.</h3>
<p>Lo primero que tenemos que hacer es editar el fichero de configuración para activar los registros de accesos exitosos y fallidos:</p>
<pre class="language-txt"><code class="language-txt">root@mongodb:/home/usuario# nano /etc/mysql/mariadb.conf.d/50-server.cnf </code></pre>
<p>Descomentamos las 2 primeras líneas:</p>
<pre class="language-txt"><code class="language-txt">general_log_file       = /var/log/mysql/mysql.log<br>general_log            = 1<br>log_error = /var/log/mysql/error.log</code></pre>
<p>Cambiamos el dueño del log de mysql a mysql y reiniciamos el servicio:</p>
<pre class="language-txt"><code class="language-txt">root@mongodb:/home/usuario# chown mysql: /var/log/mysql/<br>root@mongodb:/home/usuario# systemctl restart mysql<br>root@mongodb:/home/usuario# systemctl restart mariadb</code></pre>
<p>Accedemos varias veces con usuarios inexistentes y existentes para que se guarde en el log y lo visualizamos:</p>
<pre class="language-txt"><code class="language-txt">root@mongodb:/home/usuario# cat /var/log/mysql/error.log</code></pre>
<p>En este log nos muestra el acceso denegado, muestro la última línea:</p>
<pre class="language-txt"><code class="language-txt">2023-02-22 11:13:59 39 [Warning] Access denied for user 'prueba'@'localhost' (using password: NO)</code></pre>
<p>Este log nos muestra la conexión y los comandos usados durante esa sesión:</p>
<pre class="language-txt"><code class="language-txt">root@mongodb:/home/usuario# cat /var/log/mysql/mysql.log</code></pre>
<p>El contenido de la última conexión es el siguiente:</p>
<pre class="language-txt"><code class="language-txt">230222 11:16:13	    40 Connect	alemd@localhost as anonymous on <br>		    40 Query	select @@version_comment limit 1<br>230222 11:16:16	    40 Query	show users<br>230222 11:16:21	    40 Query	show databases<br>230222 11:16:25	    40 Query	select * from dual<br>230222 11:16:30	    40 Quit	</code></pre>
<p>Más allá de este log, con mysql no se puede hacer mucho más de auditorías, a no ser, que instalemos un plugin de auditoría:</p>
<pre class="language-txt"><code class="language-txt">root@mongodb:/home/usuario# mysql<br>Welcome to the MariaDB monitor.  Commands end with ; or \g.<br>Your MariaDB connection id is 41<br>Server version: 10.3.36-MariaDB-0+deb10u2-log Debian 10<br><br>Copyright (c) 2000, 2018, Oracle, MariaDB Corporation Ab and others.<br><br>Type 'help;' or '\h' for help. Type '\c' to clear the current input statement.<br><br>MariaDB [(none)]> INSTALL SONAME 'server_audit';<br>Query OK, 0 rows affected (0,045 sec)<br></code></pre>
<p>Una vez tengamos instalado el plugin, necesitamos activarlo editando el fichero de configuración de mysql.</p>
<pre class="language-txt"><code class="language-txt">root@mongodb:/home/usuario# nano /etc/mysql/mariadb.conf.d/50-server.cnf</code></pre>
<p>En el apartado server, añadimos lo siguiente:</p>
<pre class="language-txt"><code class="language-txt">server_audit_events=CONNECT,QUERY,TABLE<br>server_audit_logging=ON<br>server_audit_incl_users=alemd</code></pre>
<p>Reiniciamos el servicio y probaremos a crear una pequeña tabla en la base de datos alemd e insertaremos registros en esa tabla.</p>
<pre class="language-txt"><code class="language-txt">CREATE TABLE ALUMNO (<br>	NOMBRE VARCHAR(30),<br>	APELLIDO1 VARCHAR(30),<br>	APELLIDO2 VARCHAR(30)<br>)<br><br>INSERT INTO ALUMNO VALUES ('JUAN','PEREZ','LOPEZ');<br>INSERT INTO ALUMNO VALUES ('JUAN','PEREZ','LOPEZ');<br>INSERT INTO ALUMNO VALUES ('JUAN','PEREZ','LOPEZ');</code></pre>
<p>Si visualizamos el siguiente log, vemos que nos indica los inserts realizados:</p>
<pre class="language-txt"><code class="language-txt">root@mongodb:/home/usuario# cat /var/lib/mysql/server_audit.log </code></pre>
<p>El contenido es el siguiente:</p>
<pre class="language-txt"><code class="language-txt">20230222 11:43:36,mongodb,alemd,localhost,37,64,QUERY,prueba,'INSERT INTO ALUMNO VALUES (\'JUAN\',\'PEREZ\',\'LOPEZ\')',0<br>20230222 11:43:37,mongodb,alemd,localhost,37,65,WRITE,prueba,ALUMNO,<br>20230222 11:43:37,mongodb,alemd,localhost,37,65,QUERY,prueba,'INSERT INTO ALUMNO VALUES (\'JUAN\',\'PEREZ\',\'LOPEZ\')',0<br>20230222 11:43:38,mongodb,alemd,localhost,37,66,WRITE,prueba,ALUMNO,<br>20230222 11:43:38,mongodb,alemd,localhost,37,66,QUERY,prueba,'INSERT INTO ALUMNO VALUES (\'JUAN\',\'PEREZ\',\'LOPEZ\')',0<br>20230222 11:43:53,mongodb,alemd,localhost,37,0,DISCONNECT,prueba,,0</code></pre>
<p>Nos muestra la hora, el nombre de la máquina(mongodb), el usuario de la base de datos, la conexión que es localhost, sobre que tabla se realiza y que es lo que hace. Como es una tabla sencilla sin primary key, yo he usado varias veces el mismo registro.</p>
<h3 id="averigua-las-posibilidades-que-ofrece-mongodb-para-auditar-los-cambios-que-va-sufriendo-un-documento.-demuestra-su-funcionamiento." tabindex="-1">Averigua las posibilidades que ofrece MongoDB para auditar los cambios que va sufriendo un documento. Demuestra su funcionamiento.</h3>
<p>La única versión de MongoDB que nos permite realizar auditorías es MongoDB Enterprise. Tendremos 3 opciones para realizar auditorías:</p>
<ul>
<li>Que se guarden en el <code>syslog</code></li>
<li>Que se guarden en un fichero JSON o BSON.</li>
<li>O hacer que aparezcan en la consola.</li>
</ul>
<p>Lo primero que haremos, será ver las distintas maneras de habilitar las auditorías:</p>
<ol>
<li>
<p>Desde la consola, habilitar la auditoría en el syslog.</p>
<pre class="language-txt"><code class="language-txt">mongod --dbpath /var/lib/mongodb/ --auditDestination syslog</code></pre>
</li>
<li>
<p>Desde la consola, habilitar la auditoría en un fichero JSON o BSON.</p>
<pre class="language-txt"><code class="language-txt">mongod --dbpath /var/lib/mongodb/ --auditDestination file --auditFormat [JSON|BSON] --auditPath /var/lib/mongodb/[auditLog.json|auditLog.bson]</code></pre>
</li>
<li>
<p>Desde la consola, habilitar la auditoría en la consola.</p>
<pre class="language-txt"><code class="language-txt">mongod --dbpath /var/lib/mongodb/ --auditDestination console</code></pre>
</li>
<li>
<p>Desde el fichero de configuración de mongodb, habilitar las auditorías en el syslog.</p>
<pre class="language-txt"><code class="language-txt">nano /etc/mongod.conf<br><br>storage:<br>  dbPath: /var/lib/mongodb/<br>auditLog:<br>  destination: syslog</code></pre>
</li>
<li>
<p>Desde el fichero de configuración de mongodb, habilitar las auditorías en un fichero JSON o BSON.</p>
<pre class="language-txt"><code class="language-txt">nano /etc/mongod.conf<br><br>storage:<br>  dbPath: /var/lib/mongodb/<br>auditLog:<br>  destination: file<br>  format: [JSON|BSON]<br>  path: /var/lib/mongodb/[auditLog.json|auditLog.bson]</code></pre>
</li>
<li>
<p>Desde el fichero de configuración de mongodb, habilitar las auditorías en la consola.</p>
<pre class="language-txt"><code class="language-txt">storage:<br>  dbPath: /var/lib/mongodb/<br>auditLog:<br>  destination: console</code></pre>
</li>
</ol>
<p>La opción que yo he elegido, ha sido desde la terminal, habilitar las auditorías usando un fichero JSON:</p>
<pre class="language-txt"><code class="language-txt">root@mongodb:/home/vagrant# mongod --dbpath /var/lib/mongodb/ --auditDestination file --auditFormat JSON --auditPath /var/lib/mongodb/auditLog.json</code></pre>
<p>Si hacemos un cat al fichero nos muestra que funciona correctamente:</p>
<pre class="language-json"><code class="language-json">root@mongodb<span class="token operator">:</span>/home/vagrant# cat /var/lib/mongodb/auditLog.json | jq<br><span class="token punctuation">{</span><br>  <span class="token property">"atype"</span><span class="token operator">:</span> <span class="token string">"startup"</span><span class="token punctuation">,</span><br>  <span class="token property">"ts"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"$date"</span><span class="token operator">:</span> <span class="token string">"2023-02-22T13:19:29.635+00:00"</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"uuid"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"$binary"</span><span class="token operator">:</span> <span class="token string">"TV6jVkoZSsW96vJFM/dq9g=="</span><span class="token punctuation">,</span><br>    <span class="token property">"$type"</span><span class="token operator">:</span> <span class="token string">"04"</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"local"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"isSystemUser"</span><span class="token operator">:</span> <span class="token boolean">true</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"remote"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"isSystemUser"</span><span class="token operator">:</span> <span class="token boolean">true</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"users"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>  <span class="token property">"roles"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>  <span class="token property">"param"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"options"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>      <span class="token property">"auditLog"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>        <span class="token property">"destination"</span><span class="token operator">:</span> <span class="token string">"file"</span><span class="token punctuation">,</span><br>        <span class="token property">"format"</span><span class="token operator">:</span> <span class="token string">"JSON"</span><span class="token punctuation">,</span><br>        <span class="token property">"path"</span><span class="token operator">:</span> <span class="token string">"/var/lib/mongodb/auditLog.json"</span><br>      <span class="token punctuation">}</span><span class="token punctuation">,</span><br>      <span class="token property">"storage"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>        <span class="token property">"dbPath"</span><span class="token operator">:</span> <span class="token string">"/var/lib/mongodb/"</span><br>      <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"result"</span><span class="token operator">:</span> <span class="token number">0</span><br><span class="token punctuation">}</span><br><span class="token punctuation">{</span><br>  <span class="token property">"atype"</span><span class="token operator">:</span> <span class="token string">"createDatabase"</span><span class="token punctuation">,</span><br>  <span class="token property">"ts"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"$date"</span><span class="token operator">:</span> <span class="token string">"2023-02-22T13:19:32.583+00:00"</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"uuid"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"$binary"</span><span class="token operator">:</span> <span class="token string">"TV6jVkoZSsW96vJFM/dq9g=="</span><span class="token punctuation">,</span><br>    <span class="token property">"$type"</span><span class="token operator">:</span> <span class="token string">"04"</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"local"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"isSystemUser"</span><span class="token operator">:</span> <span class="token boolean">true</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"remote"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"isSystemUser"</span><span class="token operator">:</span> <span class="token boolean">true</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"users"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>  <span class="token property">"roles"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>  <span class="token property">"param"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"ns"</span><span class="token operator">:</span> <span class="token string">"admin"</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"result"</span><span class="token operator">:</span> <span class="token number">0</span><br><span class="token punctuation">}</span><br></code></pre>
<p>Realizo algunas operaciones y las muestro:</p>
<p>Aquí nos muestra que hemos creado una base de datos.</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br>  <span class="token property">"atype"</span><span class="token operator">:</span> <span class="token string">"createDatabase"</span><span class="token punctuation">,</span><br>  <span class="token property">"ts"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"$date"</span><span class="token operator">:</span> <span class="token string">"2023-02-22T13:19:33.696+00:00"</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"uuid"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"$binary"</span><span class="token operator">:</span> <span class="token string">"DWSnKPyfQqqYzkg/S+VBbg=="</span><span class="token punctuation">,</span><br>    <span class="token property">"$type"</span><span class="token operator">:</span> <span class="token string">"04"</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"local"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"isSystemUser"</span><span class="token operator">:</span> <span class="token boolean">true</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"remote"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"isSystemUser"</span><span class="token operator">:</span> <span class="token boolean">true</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"users"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>  <span class="token property">"roles"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>  <span class="token property">"param"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"ns"</span><span class="token operator">:</span> <span class="token string">"config"</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"result"</span><span class="token operator">:</span> <span class="token number">0</span><br><span class="token punctuation">}</span></code></pre>
<p>Aquí nos muestra que hemos creado una colección.</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br>  <span class="token property">"atype"</span><span class="token operator">:</span> <span class="token string">"createCollection"</span><span class="token punctuation">,</span><br>  <span class="token property">"ts"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"$date"</span><span class="token operator">:</span> <span class="token string">"2023-02-22T13:19:33.696+00:00"</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"uuid"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"$binary"</span><span class="token operator">:</span> <span class="token string">"DWSnKPyfQqqYzkg/S+VBbg=="</span><span class="token punctuation">,</span><br>    <span class="token property">"$type"</span><span class="token operator">:</span> <span class="token string">"04"</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"local"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"isSystemUser"</span><span class="token operator">:</span> <span class="token boolean">true</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"remote"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"isSystemUser"</span><span class="token operator">:</span> <span class="token boolean">true</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"users"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>  <span class="token property">"roles"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>  <span class="token property">"param"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"ns"</span><span class="token operator">:</span> <span class="token string">"config.system.sessions"</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"result"</span><span class="token operator">:</span> <span class="token number">0</span><br><span class="token punctuation">}</span></code></pre>
<p>Aquí nos muestra que nos deslogueamos</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br>  <span class="token property">"atype"</span><span class="token operator">:</span> <span class="token string">"logout"</span><span class="token punctuation">,</span><br>  <span class="token property">"ts"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"$date"</span><span class="token operator">:</span> <span class="token string">"2023-02-22T13:21:23.017+00:00"</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"uuid"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"$binary"</span><span class="token operator">:</span> <span class="token string">"mmU3D1a+R1K9BAYKB6HfzQ=="</span><span class="token punctuation">,</span><br>    <span class="token property">"$type"</span><span class="token operator">:</span> <span class="token string">"04"</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"local"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"isSystemUser"</span><span class="token operator">:</span> <span class="token boolean">true</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"remote"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"isSystemUser"</span><span class="token operator">:</span> <span class="token boolean">true</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"users"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>  <span class="token property">"roles"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>  <span class="token property">"param"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"reason"</span><span class="token operator">:</span> <span class="token string">"Client has disconnected"</span><span class="token punctuation">,</span><br>    <span class="token property">"initialUsers"</span><span class="token operator">:</span> <span class="token punctuation">[</span><br>      <span class="token punctuation">{</span><br>        <span class="token property">"user"</span><span class="token operator">:</span> <span class="token string">"__system"</span><span class="token punctuation">,</span><br>        <span class="token property">"db"</span><span class="token operator">:</span> <span class="token string">"local"</span><br>      <span class="token punctuation">}</span><br>    <span class="token punctuation">]</span><span class="token punctuation">,</span><br>    <span class="token property">"updatedUsers"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"result"</span><span class="token operator">:</span> <span class="token number">0</span><br><span class="token punctuation">}</span><br></code></pre>
<h3 id="averigua-si-en-mongodb-se-pueden-auditar-los-accesos-a-una-colecci%C3%B3n-concreta.-demuestra-su-funcionamiento." tabindex="-1">Averigua si en MongoDB se pueden auditar los accesos a una colección concreta. Demuestra su funcionamiento.</h3>
<p>Sí, se pueden auditar los accesos a una colección concreta. Seguiremos los siguientes pasos:</p>
<ol>
<li>
<p>Conectados al usuario admin. crearemos una base de datos donde se guardará la colección y creamos la colección que vamos a auditar:</p>
<pre class="language-txt"><code class="language-txt">Enterprise test> use prueba<br>switched to db prueba<br>Enterprise prueba> db.createCollection("alumno")<br>{ ok: 1 }</code></pre>
</li>
<li>
<p>Insertamos datos en la colección:</p>
<pre class="language-txt"><code class="language-txt">Enterprise prueba> db.alumno.insertMany( [<br>...   { nombre: "Ale", id: 1 },<br>...   { nombre: "Manolo", id: 2 },<br>...   { nombre: "Paco", id: 3 }<br>... ] )<br>{<br>  acknowledged: true,<br>  insertedIds: {<br>    '0': ObjectId("63f6298e92eef3c4cdabb572"),<br>    '1': ObjectId("63f6298e92eef3c4cdabb573"),<br>    '2': ObjectId("63f6298e92eef3c4cdabb574")<br>  }<br>}</code></pre>
</li>
<li>
<p>Le damos al usuario admin permisos de root y ejecutamos el comando con el que se va a activar la auditoría:</p>
<pre class="language-txt"><code class="language-txt">Enterprise admin> db.grantRolesToUser('admin', [{ role: 'root', db: 'admin' }])<br>{ ok: 1 }<br>Enterprise admin> db.setLogLevel(3, "accessControl")<br>{<br>  was: {<br>    verbosity: 0,<br>    accessControl: { verbosity: -1 },<br>    assert: { verbosity: -1 },<br>    command: { verbosity: -1 },<br>    control: { verbosity: -1 },<br>    executor: { verbosity: -1 },<br>    geo: { verbosity: -1 },<br>    index: { verbosity: -1 },<br>    network: {<br>      verbosity: -1,<br>      asio: { verbosity: -1 },<br>      bridge: { verbosity: -1 },<br>      connectionPool: { verbosity: -1 }<br>    },<br>    processHealth: { verbosity: -1 },<br>    query: { verbosity: -1 },<br>    replication: {<br>      verbosity: -1,<br>      election: { verbosity: -1 },<br>      heartbeats: { verbosity: -1 },<br>      initialSync: { verbosity: -1 },<br>      rollback: { verbosity: -1 }<br>    },<br>    sharding: {<br>      verbosity: -1,<br>      rangeDeleter: { verbosity: -1 },<br>      shardingCatalogRefresh: { verbosity: -1 },<br>      migration: { verbosity: -1 },<br>      reshard: { verbosity: -1 },<br>      migrationPerf: { verbosity: -1 }<br>    },<br>    storage: {<br>      verbosity: -1,<br>      recovery: { verbosity: -1 },<br>      journal: { verbosity: -1 },<br>      wt: {<br>        verbosity: -1,<br>        wtBackup: { verbosity: -1 },<br>        wtCheckpoint: { verbosity: -1 },<br>        wtCompact: { verbosity: -1 },<br>        wtEviction: { verbosity: -1 },<br>        wtHS: { verbosity: -1 },<br>        wtRecovery: { verbosity: -1 },<br>        wtRTS: { verbosity: -1 },<br>        wtSalvage: { verbosity: -1 },<br>        wtTiered: { verbosity: -1 },<br>        wtTimestamp: { verbosity: -1 },<br>        wtTransaction: { verbosity: -1 },<br>        wtVerify: { verbosity: -1 },<br>        wtWriteLog: { verbosity: -1 }<br>      }<br>    },<br>    write: { verbosity: -1 },<br>    ftdc: { verbosity: -1 },<br>    tracking: { verbosity: -1 },<br>    transaction: { verbosity: -1 },<br>    tenantMigration: { verbosity: -1 },<br>    test: { verbosity: -1 }<br>  },<br>  ok: 1<br>}</code></pre>
</li>
<li>
<p>Creamos un usuario que pueda acceder a la base de datos:</p>
<pre class="language-txt"><code class="language-txt">Enterprise prueba> db.createUser({<br>... user: "alemd",<br>... pwd: "usuario",<br>... roles: [{ role: "readWrite", db: "prueba"}]<br>... });<br>{ ok: 1 }</code></pre>
</li>
<li>
<p>Nos logueamos con el usuario y realizamos una consulta a la colección:</p>
<pre class="language-txt"><code class="language-txt">root@mongodb:/home/vagrant# mongosh -u alemd -p --authenticationDatabase prueba<br>Enter password: *******<br>Current Mongosh Log ID:	63f62d37e3bae1519b4d1fac<br>Connecting to:		mongodb://&lt;credentials>@127.0.0.1:27017/?directConnection=true&amp;serverSelectionTimeoutMS=2000&amp;authSource=prueba&amp;appName=mongosh+1.7.1<br>Using MongoDB:		6.0.4<br>Using Mongosh:		1.7.1<br><br>For mongosh info see: https://docs.mongodb.com/mongodb-shell/<br><br>Enterprise test> use prueba<br>switched to db prueba<br>Enterprise prueba> db.alumno.find()<br>[<br>  { _id: ObjectId("63f6298e92eef3c4cdabb572"), nombre: 'Ale', id: 1 },<br>  {<br>    _id: ObjectId("63f6298e92eef3c4cdabb573"),<br>    nombre: 'Manolo',<br>    id: 2<br>  },<br>  { _id: ObjectId("63f6298e92eef3c4cdabb574"), nombre: 'Paco', id: 3 }<br>]</code></pre>
</li>
<li>
<p>Creamos un usuario sin permisos y volvemos a realizar una consulta a la colección:</p>
<pre class="language-txt"><code class="language-txt">Enterprise admin> db.createRole({<br>...    role: "ninguno",<br>...    privileges: [<br>...       { resource: { db: "prueba", collection: "" }, actions: ["remove"] }<br>...    ],<br>...    roles: []<br>... })<br>{ ok: 1 }<br>Enterprise admin> db.createUser(<br>...   {<br>...     user: "usuario1",<br>...     pwd: "usuario",<br>...     roles: ["ninguno"]<br>...   }<br>... )<br>{ ok: 1 }<br>Enterprise admin> exit<br>root@mongodb:/home/vagrant# mongosh -u usuario1 -p --authenticationDatabase<br>Enter password: *******<br>Current Mongosh Log ID:	63f62e9e3d9f637adb8fedd1<br>Connecting to:		mongodb://&lt;credentials>@127.0.0.1:27017/?directConnection=true&amp;serverSelectionTimeoutMS=2000&amp;appName=mongosh+1.7.1<br>Using MongoDB:		6.0.4<br>Using Mongosh:		1.7.1<br><br>For mongosh info see: https://docs.mongodb.com/mongodb-shell/<br><br>Enterprise test> use prueba<br>switched to db prueba<br>Enterprise prueba> db.alumno.find()<br>MongoServerError: not authorized on prueba to execute command { find: "alumno", filter: {}, lsid: { id: UUID("2c12c016-9e3f-4d64-9f09-d5830df633cd") }, $db: "prueba" }</code></pre>
</li>
<li>
<p>Consultamos el log y veremos los accesos de la colección:</p>
<p>Aquí nos muestra una autenticación fallada para el usuario alemd en la base de datos admin.</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br>  <span class="token property">"t"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"$date"</span><span class="token operator">:</span> <span class="token string">"2023-02-22T14:56:40.449+00:00"</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"s"</span><span class="token operator">:</span> <span class="token string">"I"</span><span class="token punctuation">,</span><br>  <span class="token property">"c"</span><span class="token operator">:</span> <span class="token string">"ACCESS"</span><span class="token punctuation">,</span><br>  <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">20249</span><span class="token punctuation">,</span><br>  <span class="token property">"ctx"</span><span class="token operator">:</span> <span class="token string">"conn74"</span><span class="token punctuation">,</span><br>  <span class="token property">"msg"</span><span class="token operator">:</span> <span class="token string">"Authentication failed"</span><span class="token punctuation">,</span><br>  <span class="token property">"attr"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"mechanism"</span><span class="token operator">:</span> <span class="token string">"SCRAM-SHA-256"</span><span class="token punctuation">,</span><br>    <span class="token property">"speculative"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>    <span class="token property">"principalName"</span><span class="token operator">:</span> <span class="token string">"alemd"</span><span class="token punctuation">,</span><br>    <span class="token property">"authenticationDatabase"</span><span class="token operator">:</span> <span class="token string">"admin"</span><span class="token punctuation">,</span><br>    <span class="token property">"remote"</span><span class="token operator">:</span> <span class="token string">"127.0.0.1:36046"</span><span class="token punctuation">,</span><br>    <span class="token property">"extraInfo"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token property">"error"</span><span class="token operator">:</span> <span class="token string">"UserNotFound: Could not find user \"alemd\" for db \"admin\""</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p>Aquí nos muestra un loggeo exitoso:</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br>  <span class="token property">"t"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"$date"</span><span class="token operator">:</span> <span class="token string">"2023-02-22T15:02:58.635+00:00"</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"s"</span><span class="token operator">:</span> <span class="token string">"I"</span><span class="token punctuation">,</span><br>  <span class="token property">"c"</span><span class="token operator">:</span> <span class="token string">"ACCESS"</span><span class="token punctuation">,</span><br>  <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">20250</span><span class="token punctuation">,</span><br>  <span class="token property">"ctx"</span><span class="token operator">:</span> <span class="token string">"conn101"</span><span class="token punctuation">,</span><br>  <span class="token property">"msg"</span><span class="token operator">:</span> <span class="token string">"Authentication succeeded"</span><span class="token punctuation">,</span><br>  <span class="token property">"attr"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"mechanism"</span><span class="token operator">:</span> <span class="token string">"SCRAM-SHA-256"</span><span class="token punctuation">,</span><br>    <span class="token property">"speculative"</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>    <span class="token property">"principalName"</span><span class="token operator">:</span> <span class="token string">"usuario1"</span><span class="token punctuation">,</span><br>    <span class="token property">"authenticationDatabase"</span><span class="token operator">:</span> <span class="token string">"admin"</span><span class="token punctuation">,</span><br>    <span class="token property">"remote"</span><span class="token operator">:</span> <span class="token string">"127.0.0.1:33724"</span><span class="token punctuation">,</span><br>    <span class="token property">"extraInfo"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p>Aquí nos muestra el intento fallido de acceso a una colección:</p>
<pre class="language-json"><code class="language-json"><span class="token punctuation">{</span><br>  <span class="token property">"t"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"$date"</span><span class="token operator">:</span> <span class="token string">"2023-02-22T15:02:45.500+00:00"</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"s"</span><span class="token operator">:</span> <span class="token string">"D1"</span><span class="token punctuation">,</span><br>  <span class="token property">"c"</span><span class="token operator">:</span> <span class="token string">"ACCESS"</span><span class="token punctuation">,</span><br>  <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">20238</span><span class="token punctuation">,</span><br>  <span class="token property">"ctx"</span><span class="token operator">:</span> <span class="token string">"AuthorizationManager-9"</span><span class="token punctuation">,</span><br>  <span class="token property">"msg"</span><span class="token operator">:</span> <span class="token string">"Getting user record"</span><span class="token punctuation">,</span><br>  <span class="token property">"attr"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"user"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>      <span class="token property">"user"</span><span class="token operator">:</span> <span class="token string">"usuario1"</span><span class="token punctuation">,</span><br>      <span class="token property">"db"</span><span class="token operator">:</span> <span class="token string">"prueba"</span><br>    <span class="token punctuation">}</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><span class="token punctuation">{</span><br>  <span class="token property">"t"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"$date"</span><span class="token operator">:</span> <span class="token string">"2023-02-22T15:02:45.500+00:00"</span><br>  <span class="token punctuation">}</span><span class="token punctuation">,</span><br>  <span class="token property">"s"</span><span class="token operator">:</span> <span class="token string">"I"</span><span class="token punctuation">,</span><br>  <span class="token property">"c"</span><span class="token operator">:</span> <span class="token string">"ACCESS"</span><span class="token punctuation">,</span><br>  <span class="token property">"id"</span><span class="token operator">:</span> <span class="token number">20249</span><span class="token punctuation">,</span><br>  <span class="token property">"ctx"</span><span class="token operator">:</span> <span class="token string">"conn95"</span><span class="token punctuation">,</span><br>  <span class="token property">"msg"</span><span class="token operator">:</span> <span class="token string">"Authentication failed"</span><span class="token punctuation">,</span><br>  <span class="token property">"attr"</span><span class="token operator">:</span> <span class="token punctuation">{</span><br>    <span class="token property">"mechanism"</span><span class="token operator">:</span> <span class="token string">"SCRAM-SHA-1"</span><span class="token punctuation">,</span><br>    <span class="token property">"speculative"</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span><br>    <span class="token property">"principalName"</span><span class="token operator">:</span> <span class="token string">"usuario1"</span><span class="token punctuation">,</span><br>    <span class="token property">"authenticationDatabase"</span><span class="token operator">:</span> <span class="token string">"prueba"</span><span class="token punctuation">,</span><br>    <span class="token property">"remote"</span><span class="token operator">:</span> <span class="token string">"127.0.0.1:54242"</span><span class="token punctuation">,</span><br>    <span class="token property">"extraInfo"</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token property">"error"</span><span class="token operator">:</span> <span class="token string">"UserNotFound: Could not find user \"usuario1\" for db \"prueba\""</span><br>  <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
</li>
</ol>
<hr>
<h2 id="documento-realizado-por%3A" tabindex="-1"><strong>Documento realizado por:</strong></h2>
<p>✒️ <strong>Alejandro Montes Delgado</strong> - <em>2º ASIR</em></p>

        </div>
            <p class="uppercase text-xs mt-6">Siguiente post</p>
            <p class="font-bold mb-2">
                <a href="/post/ejercicios-de-k8s-vi./">Ejercicios de K8s VI.</a>
            </p>
        
            <p class="uppercase text-xs mt-6">Post anterior.</p>

            <p class="font-bold">
                <a href="/post/ejercicios-de-k8s-v./">Ejercicios de K8s V.</a>
            </p>
        
    </div>

    </main>
    <footer class="bg-gray-900 pb-10">
  <p class="block text-center text-sm mb-6">
    Built by
    <a target="_blank" href="https://github.com/reeseschultz">
      Reese Schultz
    </a>
  </p>

  <a class="block text-center text-sm" href="/privacy-policy">Privacy Policy</a>
</footer>
    <script src="https://unpkg.com/clipboard@2/dist/clipboard.min.js"></script>
    <script src="/assets/main.bundle.js"></script>
  </body>
</html>
